{% extends "base/base.html" %}
{% load static %}

{% block title %}<title>My Listings - EduShelf</title>{% endblock title %}

{% block content %}


<body class="bg-[#1f242d] text-white">

<div class="max-w-6xl mx-auto px-6 py-14 mt-32 animate-section">
  <!-- Heading -->
  <div class="text-center mb-10">
    <h2 class="text-4xl font-bold tracking-wide text-white">
      My <span class="text-amber-500">Listings</span>
    </h2>
    <p class="text-sm text-slate-400 mt-3">Only the books you uploaded appear here.</p>
  </div>

  {% if books %}
  <!-- 2 cards per row (max) -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
    {% for book in books %}
    <a href="{% url 'book_detail' book.pk %}" class="block">
      <div class="group relative rounded-2xl overflow-hidden bg-gradient-to-br from-slate-800 to-slate-900 border border-slate-700 hover:border-teal-400 transition-all duration-500 shadow-lg hover:shadow-teal-500/20 hover:-translate-y-1 h-[420px] flex flex-col">

        <!-- Category Chip -->
        <div class="absolute z-10 top-3 left-3">
          <span class="text-xs font-medium px-3 py-1 rounded-full
          {% if book.category == 'sell' %} bg-yellow-500/20 text-yellow-300 ring-1 ring-yellow-400/40
          {% elif book.category == 'exchange' %} bg-blue-500/20 text-blue-300 ring-1 ring-blue-400/40
          {% elif book.category == 'free' %} bg-green-500/20 text-green-300 ring-1 ring-green-400/40
          {% else %} bg-purple-500/20 text-purple-300 ring-1 ring-purple-400/40 {% endif %}">
            {{ book.get_category_display }}
          </span>
        </div>

        <!-- Image (fixed height, cropped) -->
        <div class="h-48 w-full overflow-hidden">
          {% if book.cover_image %}
            <img src="{{ book.cover_image.url }}" alt="{{ book.title }}" class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500">
          {% else %}
            <img src="{% static 'images/default-book.jpg' %}" alt="Book cover" class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500">
          {% endif %}
        </div>

        <!-- Content -->
        <div class="p-6 flex-1 flex flex-col text-center">
          <h3 class="text-2xl uppercase font-semibold text-blue-200  group-hover:text-teal-300 transition-colors">{{ book.title }}</h3>
          <p class="text-sm text-slate-300 mb-6">by {{ book.author }}</p>

          <div class="grid grid-cols-2 gap-2 text-[13px]">
            <span class="px-3 py-1 rounded-full bg-slate-700/60 text-teal-300">Genre: {{ book.genre }}</span>
            <span class="px-3 py-1 rounded-full bg-slate-700/60 text-teal-300">Lang: {{ book.language }}</span>
            <span class="px-3 py-1 rounded-full bg-slate-700/60 text-teal-300">Cond: {{ book.get_condition_display }}</span>
            {% if book.category == "sell" and book.price %}
              <span class="px-3 py-1 rounded-full bg-amber-500/20 text-amber-300 ring-1 ring-amber-400/40">Price: ${{ book.price }}</span>
            {% else %}
              <span class="px-3 py-1 rounded-full bg-slate-700/60 text-slate-300">Price: —</span>
            {% endif %}
          </div>

          <!-- Footer -->
          <div class="mt-auto pt-4 flex items-center justify-between text-xs text-slate-400">
            <span class="group-hover:text-teal-300 transition-colors"><i class="fas fa-calendar-alt mr-1"></i>{{ book.upload_date|date:"M d, Y" }}</span>
            <span class="opacity-0 group-hover:opacity-100 transition-opacity">View details →</span>
          </div>
        </div>

        <!-- Subtle hover glow -->
        <div class="pointer-events-none absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500"
             style="background: radial-gradient(600px circle at 0% 0%, rgba(45,212,191,0.08), transparent 40%);">
        </div>
      </div>
    </a>
    {% endfor %}
  </div>
  {% else %}
    <div class="text-center py-16">
      <p class="text-lg text-slate-400">You haven't uploaded any books yet.</p>
      <a href="{% url 'upload_book' %}" class="mt-4 inline-block bg-teal-500 hover:bg-teal-600 text-white font-medium py-2 px-5 rounded-full shadow-lg transition-all">Upload your first book</a>
    </div>
  {% endif %}
</div>
</body>

{% endblock content %}
